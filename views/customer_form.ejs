<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IS3106 Lab</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <body>
    <div class="container mt-4">
      <div class="row g-0">
        <div class="col-3"><%- include("sidebar") %> </div>

        <div class="col-9 ps-4">
        <!-- prettier-ignore -->
        <% 
        let formAction = '/customers/add' ; 
        let formLabel = 'Create A New Customer'; 
        if (typeof _id !='undefined' ){
          formAction = `/customers/${_id}/edit`; 
          formLabel = 'Edit Customer'; 
        } 
        %>
      <h1><%= formLabel %></h1>
      <form
        action="<%= formAction %>"
        method="post"
      >
        <div class="mb-3 row">
          <label for="name" class="col-sm-4 col-form-label">Name:</label>
          <div class="col-sm-8">
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              value="<%= typeof name != 'undefined' ? name : '' %>"
              required
            />
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-sm-4 col-form-label">Gender:</div>
          <div class="col-sm-8">
            <!-- prettier-ignore -->
            <% 
              let femaleChecked = "", maleChecked = ""; 
              if (typeof gender != 'undefined' ) { 
                if (gender === 1){ 
                  femaleChecked="checked";
                } else if (gender === 2){
                  maleChecked="checked";
                }
              } 
            %>
            <!-- prettier-ignore -->
            <input
              type="radio" class="form-check-input"
              name="gender" value="1" id="Female" <%= femaleChecked %>
            />
            <label for="Female" class="form-check-label">Female</label>
            <!-- prettier-ignore -->
            <input
              type="radio" class="form-check-input"
              name="gender" value="2" id="Male" <%= maleChecked %>
            />
            <label for="Male" class="form-check-label">Male</label>
          </div>
        </div>
        <div class="mb-3 row">
          <label for="dob" class="col-sm-4 col-form-label"
            >Date of Birth <br />
            (yyyy-mm-dd):</label
          >
          <div class="col-sm-8">
            <input
              type="text"
              class="form-control"
              id="birthday"
              name="birthday"
              value="<%= typeof birthday != 'undefined' ? birthday.toISOString().split('T')[0] : '' %>"
              required
            />
          </div>
        </div>
        <div class="mb-3 row">
          <div class="col-6">
            <a href="/customers/list" class="btn btn-secondary">Cancel</a>
          </div>
          <div class="col-6 text-end">
            <input class="btn btn-primary" type="submit" value="Submit" />
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
